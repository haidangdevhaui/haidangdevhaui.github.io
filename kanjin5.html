<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kanji N5 Practice</title>
    <style type="text/css">
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
 
      body {
        font-family: "Segoe UI", Arial, sans-serif;
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 20px;
      }
 
      h1 {
        color: #2c3e50;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        font-size: 2.5em;
        margin-bottom: 30px;
        text-align: center;
      }
 
      .kanji-display {
        font-size: 80px;
        background: #fff;
        margin: 20px auto;
        padding: 25px;
        border-radius: 15px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        width: 100%;
        max-width: 300px;
        transition: transform 0.2s;
        text-align: center;
        display: flex;
        justify-content: center;
        align-items: center;
      }
 
      .kanji-display:hover {
        transform: scale(1.05);
      }
 
      #input-container {
        margin: 20px auto;
        width: 100%;
        max-width: 400px;
        display: flex;
        flex-direction: column;
        gap: 15px;
        background: rgba(255, 255, 255, 0.9);
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }
 
      input {
        padding: 12px;
        font-size: 18px;
        border: 2px solid #ddd;
        border-radius: 8px;
        transition: border-color 0.3s;
        background: #fff;
        text-align: center;
        width: 100%;
      }
 
      input:focus {
        border-color: #3498db;
        outline: none;
        box-shadow: 0 0 5px rgba(52, 152, 219, 0.3);
      }
 
      button {
        padding: 12px;
        font-size: 18px;
        background: linear-gradient(45deg, #2ecc71, #27ae60);
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: transform 0.2s, box-shadow 0.2s;
        width: 100%;
      }
 
      button:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(46, 204, 113, 0.3);
      }
 
      /* Enhanced styling for result div */
      #result {
        margin: 20px auto;
        font-size: 18px;
        padding: 15px 20px;
        border-radius: 8px;
        max-width: 400px;
        text-align: center;
        transition: all 0.3s;
        display: none;
        font-weight: 500;
      }
 
      /* Specific styling for correct, incorrect, and warning states */
      #result.correct {
        background: linear-gradient(45deg, #2ecc71, #27ae60);
        color: white;
        box-shadow: 0 4px 15px rgba(46, 204, 113, 0.3);
      }
 
      #result.incorrect {
        background: linear-gradient(45deg, #e74c3c, #c0392b);
        color: white;
        box-shadow: 0 4px 15px rgba(231, 76, 60, 0.3);
        line-height: 1.5; /* Better readability for multi-line incorrect answers */
      }
 
      #result.warning {
        background: linear-gradient(45deg, #f39c12, #e67e22);
        color: white;
        box-shadow: 0 4px 15px rgba(243, 156, 18, 0.3);
      }
 
      /* Completion state styling */
      #result.completed {
        background: linear-gradient(45deg, #3498db, #2980b9);
        color: white;
        font-size: 24px;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
        animation: bounce 1s ease infinite;
      }
 
      /* Bounce animation for completion */
      @keyframes bounce {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-10px);
        }
      }
 
      /* Responsive adjustments */
      @media (max-width: 600px) {
        #result {
          font-size: 16px;
          padding: 12px 15px;
        }
        #result.completed {
          font-size: 20px;
          padding: 15px;
        }
      }
 
      .word-info {
        display: none;
        margin: 20px auto;
        padding: 20px;
        border-radius: 15px;
        background: #fff;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        max-width: 400px;
        width: 100%;
        border-left: 5px solid #3498db;
        text-align: left;
      }
 
      .word-info p {
        margin: 8px 0;
        font-size: 16px;
        color: #2c3e50;
      }
 
      .example {
        font-style: italic;
        color: #7f8c8d;
        background: #f8f9fa;
        padding: 5px 10px;
        border-radius: 5px;
        display: block;
      }
 
      #group-selection {
        margin: 20px auto;
        width: 100%;
        max-width: 600px;
        display: flex;
        flex-direction: column;
        align-items: center;
      }
 
      #group-selection h2 {
        color: #2c3e50;
        text-align: center;
        margin-bottom: 20px;
      }
 
      .group-button {
        margin: 10px;
        padding: 15px;
        font-size: 16px;
        background: linear-gradient(45deg, #3498db, #2980b9);
        width: 100%;
        max-width: 500px;
        border-radius: 10px;
        transition: all 0.3s;
        box-shadow: 0 2px 10px rgba(52, 152, 219, 0.2);
        text-align: center;
      }
 
      .group-button:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
      }
 
      .meaning-options {
        margin: 15px 0;
        display: flex;
        flex-direction: column;
        gap: 10px;
        width: 100%;
      }
 
      .meaning-option {
        padding: 12px;
        border-radius: 8px;
        background: #fff;
        border: 2px solid #ddd;
        cursor: pointer;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        justify-content: flex-start;
        width: 100%;
        margin-bottom: 5px;
      }
 
      .meaning-option:hover {
        border-color: #3498db;
        background: #f8f9fa;
      }
 
      .meaning-option input {
        margin-right: 10px;
        width: auto;
      }
 
      .meaning-option input:checked + label {
        color: #2ecc71;
        font-weight: bold;
      }
 
      #exercise-container {
        display: none;
        width: 100%;
        max-width: 500px;
        flex-direction: column;
        align-items: center;
      }
 
      @media (max-width: 600px) {
        body {
          padding: 15px;
        }
 
        .kanji-display {
          font-size: 60px;
          padding: 20px;
          width: 90%;
        }
 
        #input-container {
          margin: 15px auto;
          padding: 15px;
          width: 90%;
        }
 
        input,
        button {
          font-size: 16px;
          padding: 10px;
        }
 
        #result,
        .word-info p {
          font-size: 16px;
        }
 
        .group-button {
          font-size: 14px;
          padding: 12px;
        }
 
        #group-selection {
          width: 90%;
        }
 
        #exercise-container {
          width: 90%;
        }
      }
    </style>
  </head>
  <body>
    <h1>Kanji N5 Practice</h1>
 
    <div id="result"></div>
 
    <div id="exercise-container">
      <div id="kanji" class="kanji-display"></div>
      <div id="input-container">
        <input type="text" id="onInput" placeholder="Type on'yomi here" />
        <input type="text" id="kunInput" placeholder="Type kun'yomi here" />
        <div class="meaning-options" id="meaningOptions"></div>
        <button onclick="checkAnswer()">Check Answer</button>
      </div>
 
      <div id="wordInfo" class="word-info">
        <p><strong>On'yomi:</strong> <span id="wordOn"></span></p>
        <p><strong>Kun'yomi:</strong> <span id="wordKun"></span></p>
        <p><strong>Meaning (VN):</strong> <span id="wordMeaning"></span></p>
        <p class="example">
          <strong>Example:</strong> <span id="wordExample"></span>
        </p>
      </div>
    </div>
 
    <div id="group-selection">
      <h2>Choose Kanji Groups</h2>
      <button
        id="startButton"
        class="group-button"
        onclick="startExercise()"
        disabled
      >
        Start Exercise
      </button>
    </div>
 
    <script>
      const updatedKanjiList = [
          { kanji: "日", on: "nichi", kun: "hi", meaning: "Mặt trời, Ngày", example: "日曜日 (nichiyoubi - Chủ nhật)" },
          { kanji: "月", on: "getsu", kun: "tsuki", meaning: "Mặt trăng, Tháng", example: "月曜日 (getsuyoubi - Thứ hai)" },
          { kanji: "金", on: "kin", kun: "kane", meaning: "Vàng, Tiền", example: "金曜日 (kinyoubi - Thứ sáu)" },
          { kanji: "水", on: "sui", kun: "mizu", meaning: "Nước", example: "水曜日 (suiyoubi - Thứ tư)" },
          { kanji: "火", on: "ka", kun: "hi", meaning: "Lửa", example: "火曜日 (kayoubi - Thứ ba)" },
          { kanji: "木", on: "moku", kun: "ki", meaning: "Cây, Gỗ", example: "木曜日 (mokuyoubi - Thứ năm)" },
          { kanji: "土", on: "do", kun: "tsuchi", meaning: "Đất", example: "土曜日 (doyoubi - Thứ bảy)" },
          { kanji: "車", on: "sha", kun: "kuruma", meaning: "Xe hơi, Phương tiện", example: "自動車 (jidousha - Ô tô)" },
          { kanji: "門", on: "mon", kun: "kado", meaning: "Cổng", example: "門前 (monzen - Trước cổng)" },
          { kanji: "田", on: "den", kun: "ta", meaning: "Ruộng lúa", example: "田中 (tanaka - Tên phổ biến, nghĩa là 'giữa ruộng')" },
          { kanji: "山", on: "san", kun: "yama", meaning: "Núi", example: "富士山 (fujisan - Núi Phú Sĩ)" },
          { kanji: "川", on: "sen", kun: "kawa", meaning: "Sông", example: "川辺 (kawabe - Bờ sông)" },
          { kanji: "雨", on: "u", kun: "ame", meaning: "Mưa", example: "雨の日 (ame no hi - Ngày mưa)" },
          { kanji: "天", on: "ten", kun: "ame", meaning: "Trời", example: "天気 (tenki - Thời tiết)" },
          { kanji: "気", on: "ki", kun: "ke", meaning: "Tinh thần, Không khí", example: "元気 (genki - Khỏe mạnh)" },
          { kanji: "父", on: "fu", kun: "tō", meaning: "Cha", example: "お父さん (otousan - Bố)" },
          { kanji: "母", on: "bo", kun: "haha", meaning: "Mẹ", example: "お母さん (okaasan - Mẹ)" },
          { kanji: "私", on: "shi", kun: "watashi", meaning: "Tôi", example: "私たち (watashitachi - Chúng tôi)" },
          { kanji: "兄", on: "kei", kun: "ani", meaning: "Anh trai", example: "お兄さん (oniisan - Anh trai)" },
          { kanji: "姉", on: "shi", kun: "ane", meaning: "Chị gái", example: "お姉さん (oneesan - Chị gái)" },
          { kanji: "弟", on: "tei", kun: "otōto", meaning: "Em trai", example: "弟さん (otoutosan - Em trai)" },
          { kanji: "妹", on: "mai", kun: "imōto", meaning: "Em gái", example: "妹さん (imoutosan - Em gái)" },
          { kanji: "一", on: "ichi", kun: "hito", meaning: "Một", example: "一日 (ichinichi - Một ngày)" },
          { kanji: "二", on: "ni", kun: "futa", meaning: "Hai", example: "二月 (nigatsu - Tháng hai)" },
          { kanji: "三", on: "san", kun: "mi", meaning: "Ba", example: "三人 (sannin - Ba người)" },
          { kanji: "四", on: "shi", kun: "yo", meaning: "Bốn", example: "四月 (shigatsu - Tháng tư)" },
          { kanji: "五", on: "go", kun: "itsu", meaning: "Năm", example: "五日 (itsuka - Ngày năm)" },
          { kanji: "六", on: "roku", kun: "mu", meaning: "Sáu", example: "六月 (rokugatsu - Tháng sáu)" },
          { kanji: "七", on: "shichi", kun: "nana", meaning: "Bảy", example: "七日 (nanoka - Ngày bảy)" },
          { kanji: "八", on: "hachi", kun: "ya", meaning: "Tám", example: "八月 (hachigatsu - Tháng tám)" },
          { kanji: "九", on: "kyū", kun: "kokono", meaning: "Chín", example: "九日 (kokonoka - Ngày chín)" },
          { kanji: "十", on: "jū", kun: "tō", meaning: "Mười", example: "十月 (juugatsu - Tháng mười)" },
          { kanji: "百", on: "hyaku", kun: "", meaning: "Trăm", example: "百円 (hyakuen - Một trăm yên)" },
          { kanji: "千", on: "sen", kun: "chi", meaning: "Ngàn", example: "千円 (senen - Một nghìn yên)" },
          { kanji: "万", on: "man", kun: "yorozu", meaning: "Mười nghìn", example: "一万円 (ichimanen - Mười nghìn yên)" },
          { kanji: "円", on: "en", kun: "maru", meaning: "Yên, Hình tròn", example: "円い (marui - Tròn)" },
          { kanji: "年", on: "nen", kun: "toshi", meaning: "Năm", example: "今年 (kotoshi - Năm nay)" },
          { kanji: "半", on: "han", kun: "naka", meaning: "Nửa", example: "半分 (hanbun - Một nửa)" },
          { kanji: "分", on: "bun", kun: "wake", meaning: "Phút, Chia", example: "三分 (sanbun - Ba phút)" },
          { kanji: "時", on: "ji", kun: "toki", meaning: "Thời gian, Giờ", example: "二時 (niji - Hai giờ)" },
          { kanji: "人", on: "jin", kun: "hito", meaning: "Người", example: "日本人 (nihonjin - Người Nhật)" },
          { kanji: "女", on: "jo", kun: "onna", meaning: "Phụ nữ", example: "女の子 (onnanoko - Con gái)" },
          { kanji: "生", on: "sei", kun: "umu", meaning: "Cuộc sống, Sinh ra", example: "先生 (sensei - Giáo viên)" },
          { kanji: "子", on: "shi", kun: "ko", meaning: "Đứa trẻ", example: "子犬 (koinu - Chó con)" },
          { kanji: "学", on: "gaku", kun: "manabu", meaning: "Học tập", example: "学校 (gakkou - Trường học)" },
          { kanji: "先", on: "sen", kun: "saki", meaning: "Trước, Phía trước", example: "先生 (sensei - Giáo viên)" },
          { kanji: "白", on: "haku", kun: "shiro", meaning: "Trắng", example: "白い (shiroi - Màu trắng)" },
          { kanji: "口", on: "kō", kun: "kuchi", meaning: "Miệng", example: "出口 (deguchi - Lối ra)" },
          { kanji: "石", on: "seki", kun: "ishi", meaning: "Đá", example: "石鹸 (sekken - Xà phòng)" },
          { kanji: "手", on: "shu", kun: "te", meaning: "Tay", example: "手紙 (tegami - Thư)" },
          { kanji: "足", on: "soku", kun: "ashi", meaning: "Chân, Đủ", example: "足りる (tariru - Đủ)" },
          { kanji: "耳", on: "ji", kun: "mimi", meaning: "Tai", example: "耳が聞こえる (mimi ga kikoeru - Nghe được)" },
          { kanji: "目", on: "moku", kun: "me", meaning: "Mắt", example: "目が覚める (me ga sameru - Thức dậy)" },
          { kanji: "体", on: "tai", kun: "karada", meaning: "Cơ thể", example: "体が痛い (karada ga itai - Cơ thể đau)" },
          { kanji: "上", on: "jō", kun: "ue", meaning: "Trên", example: "上着 (uwagi - Áo khoác)" },
          { kanji: "下", on: "ka", kun: "shita", meaning: "Dưới", example: "下着 (shitagi - Đồ lót)" },
          { kanji: "中", on: "chū", kun: "naka", meaning: "Giữa, Bên trong", example: "中学生 (chuugakusei - Học sinh cấp 2)" },
          { kanji: "大", on: "dai", kun: "ō", meaning: "Lớn", example: "大学 (daigaku - Đại học)" },
          { kanji: "小", on: "shō", kun: "chiisai", meaning: "Nhỏ", example: "小さい (chiisai - Nhỏ)" },
          { kanji: "本", on: "hon", kun: "moto", meaning: "Sách, Nguồn gốc", example: "日本 (nihon - Nhật Bản)" },
          { kanji: "力", on: "ryoku", kun: "chikara", meaning: "Sức mạnh", example: "体力 (tairyoku - Sức khỏe)" },
          { kanji: "何", on: "ka", kun: "nani", meaning: "Cái gì", example: "何時 (nanji - Mấy giờ)" },
          { kanji: "出", on: "shutsu", kun: "de", meaning: "Ra ngoài", example: "出かける (dekakeru - Đi ra ngoài)" },
          { kanji: "入", on: "nyū", kun: "hairu", meaning: "Vào trong", example: "入る (hairu - Vào)" },
          { kanji: "明", on: "mei", kun: "aka", meaning: "Sáng, Ánh sáng", example: "明日 (ashita - Ngày mai)" },
          { kanji: "休", on: "kyū", kun: "yasumu", meaning: "Nghỉ ngơi", example: "休む (yasumu - Nghỉ)" },
          { kanji: "好", on: "kō", kun: "suki", meaning: "Thích", example: "好き (suki - Thích)" },
          { kanji: "男", on: "dan", kun: "otoko", meaning: "Đàn ông", example: "男の子 (otokonoko - Con trai)" },
          { kanji: "間", on: "kan", kun: "aida", meaning: "Khoảng cách, Không gian", example: "時間 (jikan - Thời gian)" },
          { kanji: "岩", on: "gan", kun: "iwa", meaning: "Đá lớn", example: "岩石 (ganseki - Đá)" },
          { kanji: "畑", on: "hata", kun: "hatake", meaning: "Cánh đồng", example: "畑仕事 (hatashigoto - Công việc đồng ruộng)" },
          { kanji: "森", on: "shin", kun: "mori", meaning: "Rừng", example: "森林 (shinrin - Rừng)" },
          { kanji: "林", on: "rin", kun: "hayashi", meaning: "Lùm cây", example: "林道 (rindou - Đường rừng)" },
          { kanji: "右", on: "u", kun: "migi", meaning: "Phải", example: "右側 (migigawa - Bên phải)" },
          { kanji: "左", on: "sa", kun: "hidari", meaning: "Trái", example: "左側 (hidarigawa - Bên trái)" },
          { kanji: "東", on: "tō", kun: "higashi", meaning: "Đông", example: "東京 (toukyou - Tokyo)" },
          { kanji: "西", on: "sei", kun: "nishi", meaning: "Tây", example: "西口 (nishiguchi - Cửa tây)" },
          { kanji: "北", on: "hoku", kun: "kita", meaning: "Bắc", example: "北海道 (hokkaidou - Hokkaido)" },
          { kanji: "南", on: "nan", kun: "minami", meaning: "Nam", example: "南口 (minamiguchi - Cửa nam)" },
          { kanji: "外", on: "gai", kun: "soto", meaning: "Bên ngoài", example: "外国人 (gaikokujin - Người nước ngoài)" },
          { kanji: "駅", on: "eki", kun: "", meaning: "Ga tàu", example: "駅前 (ekimae - Trước ga)" },
          { kanji: "会", on: "kai", kun: "au", meaning: "Cuộc họp, Gặp", example: "会社 (kaisha - Công ty)" },
          { kanji: "内", on: "nai", kun: "uchi", meaning: "Bên trong", example: "国内 (kokunai - Trong nước)" },
          { kanji: "長", on: "chō", kun: "naga", meaning: "Dài, Lãnh đạo", example: "長い (nagai - Dài)" },
          { kanji: "高", on: "kō", kun: "taka", meaning: "Cao, Đắt", example: "高い (takai - Cao)" },
          { kanji: "名", on: "mei", kun: "na", meaning: "Tên", example: "名前 (namae - Tên)" },
          { kanji: "行", on: "kō", kun: "iku", meaning: "Đi", example: "行く (iku - Đi)" },
          { kanji: "来", on: "rai", kun: "kuru", meaning: "Đến", example: "来る (kuru - Đến)" },
          { kanji: "食", on: "shoku", kun: "taberu", meaning: "Ăn", example: "食べる (taberu - Ăn)" },
          { kanji: "見", on: "ken", kun: "miru", meaning: "Nhìn, Thấy", example: "見る (miru - Nhìn)" },
          { kanji: "聞", on: "bun", kun: "kiku", meaning: "Nghe", example: "聞く (kiku - Nghe)" },
          { kanji: "読", on: "doku", kun: "yomu", meaning: "Đọc", example: "読む (yomu - Đọc)" },
          { kanji: "書", on: "sho", kun: "kaku", meaning: "Viết", example: "書く (kaku - Viết)" },
          { kanji: "話", on: "wa", kun: "hanasu", meaning: "Nói", example: "話す (hanasu - Nói)" },
          { kanji: "午", on: "go", kun: "uma", meaning: "Trưa", example: "午後 (gogo - Buổi chiều)" },
          { kanji: "前", on: "zen", kun: "mae", meaning: "Trước", example: "名前 (namae - Tên)" },
          { kanji: "後", on: "go", kun: "ushiro", meaning: "Sau", example: "後ろ (ushiro - Phía sau)" },
          { kanji: "毎", on: "mai", kun: "", meaning: "Mỗi", example: "毎日 (mainichi - Mỗi ngày)" },
          { kanji: "校", on: "kō", kun: "", meaning: "Trường học", example: "学校 (gakkou - Trường học)" },
          { kanji: "語", on: "go", kun: "kataru", meaning: "Ngôn ngữ", example: "日本語 (nihongo - Tiếng Nhật)" },
          { kanji: "今", on: "kon", kun: "ima", meaning: "Bây giờ", example: "今日 (kyou - Hôm nay)" },
          { kanji: "電", on: "den", kun: "", meaning: "Điện", example: "電話 (denwa - Điện thoại)" },
          { kanji: "国", on: "koku", kun: "kuni", meaning: "Quốc gia", example: "日本国 (nihonkoku - Nước Nhật)" }
        ];
      let kanjiList = [];
      let currentKanji;
      let meaningOptions = [];
 
      const kanjiGroups = [];
      for (let i = 0; i < updatedKanjiList.length; i += 5) {
        kanjiGroups.push(updatedKanjiList.slice(i, i + 5));
      }
 
      function createGroupSelection() {
        const groupDiv = document.getElementById("group-selection");
        kanjiGroups.forEach((group, index) => {
          const div = document.createElement("div");
          div.className = "meaning-option"; // Reusing this class for consistent styling
 
          const checkbox = document.createElement("input");
          checkbox.type = "checkbox";
          checkbox.id = `group${index}`;
          checkbox.name = "kanjiGroup";
          checkbox.value = index;
          checkbox.addEventListener("change", toggleStartButton);
 
          const label = document.createElement("label");
          label.htmlFor = `group${index}`;
          label.textContent = `Group ${index + 1}: ${group
            .map((k) => k.kanji)
            .join(", ")}`;
 
          div.appendChild(checkbox);
          div.appendChild(label);
          groupDiv.insertBefore(div, document.getElementById("startButton"));
        });
      }
 
      function toggleStartButton() {
        const checkboxes = document.querySelectorAll(
          'input[name="kanjiGroup"]:checked'
        );
        document.getElementById("startButton").disabled =
          checkboxes.length === 0;
      }
 
      function startExercise() {
        const selectedGroups = Array.from(
          document.querySelectorAll('input[name="kanjiGroup"]:checked')
        ).map((checkbox) => parseInt(checkbox.value));
 
        kanjiList = selectedGroups
          .map((groupIndex) => kanjiGroups[groupIndex])
          .flat();
 
        if (kanjiList.length > 0) {
          document.getElementById("group-selection").style.display = "none";
          document.getElementById("exercise-container").style.display = "flex";
          getRandomKanji();
        }
      }
 
      function generateMeaningOptions() {
        // Clear previous options
        const meaningContainer = document.getElementById("meaningOptions");
        meaningContainer.innerHTML = "";
 
        // Generate 3 random wrong meanings plus the correct one
        meaningOptions = [currentKanji.meaning];
        while (meaningOptions.length < 4) {
          const randomKanji =
            updatedKanjiList[
              Math.floor(Math.random() * updatedKanjiList.length)
            ];
          if (
            !meaningOptions.includes(randomKanji.meaning) &&
            randomKanji.meaning !== currentKanji.meaning
          ) {
            meaningOptions.push(randomKanji.meaning);
          }
        }
 
        // Shuffle options
        meaningOptions.sort(() => Math.random() - 0.5);
 
        // Create radio buttons
        meaningOptions.forEach((meaning, index) => {
          const div = document.createElement("div");
          div.className = "meaning-option";
 
          const input = document.createElement("input");
          input.type = "radio";
          input.name = "meaning";
          input.id = `meaning${index}`;
          input.value = meaning;
 
          const label = document.createElement("label");
          label.htmlFor = `meaning${index}`;
          label.textContent = meaning;
 
          div.appendChild(input);
          div.appendChild(label);
          meaningContainer.appendChild(div);
        });
      }
 
      function checkAnswer() {
        const onInput = document
          .getElementById("onInput")
          .value.toLowerCase()
          .trim();
        const kunInput = document
          .getElementById("kunInput")
          .value.toLowerCase()
          .trim();
        const selectedMeaning = document.querySelector(
          'input[name="meaning"]:checked'
        );
        const resultDiv = document.getElementById("result");
        resultDiv.style.display = "block";
        resultDiv.className = ""; // Reset classes
 
        const correctOn =
          (currentKanji.on === "" && onInput === "") ||
          onInput === currentKanji.on;
        const correctKun =
          (currentKanji.kun === "" && kunInput === "") ||
          kunInput === currentKanji.kun;
        const correctMeaning =
          selectedMeaning && selectedMeaning.value === currentKanji.meaning;
 
        if (!selectedMeaning) {
          resultDiv.className = "warning";
          resultDiv.textContent = "Vui lòng chọn một nghĩa trước!";
          return;
        }
 
        if (correctKun && correctOn && correctMeaning) {
          document.getElementById("meaningOptions").style.display = "none";
          resultDiv.className = "correct";
          resultDiv.textContent = "Correctly! This word will be removed...";
 
          document.getElementById("wordOn").textContent =
            currentKanji.on || "(none)";
          document.getElementById("wordKun").textContent =
            currentKanji.kun || "(none)";
          document.getElementById("wordMeaning").textContent =
            currentKanji.meaning;
          document.getElementById("wordExample").textContent =
            currentKanji.example;
          document.getElementById("wordInfo").style.display = "block";
 
          kanjiList = kanjiList.filter((k) => k.kanji !== currentKanji.kanji);
          setTimeout(getRandomKanji, 2500);
        } else {
          resultDiv.className = "incorrect";
          let errorMessage = "Incorrect! The correct answer is:<br>";
          errorMessage += `On: ${currentKanji.on || "(none)"}<br>`;
          errorMessage += `Kun: ${currentKanji.kun || "(none)"}<br>`;
          errorMessage += `Meaning: ${currentKanji.meaning}`;
          resultDiv.innerHTML = errorMessage;
          setTimeout(getRandomKanji, 2500);
        }
      }
 
      function getRandomKanji() {
        if (kanjiList.length === 0) {
          document.getElementById("kanji").textContent = "🎉 Completed!";
          const resultDiv = document.getElementById("result");
          resultDiv.style.display = "block";
          resultDiv.className = "completed";
          resultDiv.textContent =
            "Congratulations! You've finished the exercise!";
          document.getElementById("onInput").disabled = true;
          document.getElementById("kunInput").disabled = true;
          document.getElementById("meaningOptions").innerHTML = "";
          document.getElementById("wordInfo").style.display = "none";
          document.getElementById("group-selection").style.display = "flex";
          document.getElementById("input-container").style.display = "none";
          return;
        }
 
        const randomIndex = Math.floor(Math.random() * kanjiList.length);
        currentKanji = kanjiList[randomIndex];
 
        document.getElementById("kanji").textContent = currentKanji.kanji;
        document.getElementById("onInput").value = "";
        document.getElementById("kunInput").value = "";
        document.getElementById("onInput").disabled = false;
        document.getElementById("kunInput").disabled = false;
        document.getElementById("result").textContent = "";
        document.getElementById("result").style.display = "none";
        document.getElementById("wordInfo").style.display = "none";
        document.getElementById("meaningOptions").style.display = "block";
        document.getElementById("input-container").style.display = "flex";
 
        generateMeaningOptions();
        document.getElementById("onInput").focus();
      }
 
      document
        .getElementById("onInput")
        .addEventListener("keypress", function (event) {
          if (event.key === "Enter") {
            document.getElementById("kunInput").focus();
          }
        });
 
      document
        .getElementById("kunInput")
        .addEventListener("keypress", function (event) {
          if (event.key === "Enter") {
            const firstRadio = document.querySelector('input[name="meaning"]');
            if (firstRadio) firstRadio.focus();
          }
        });
 
      window.onload = createGroupSelection;
    </script>
  </body>
</html>
